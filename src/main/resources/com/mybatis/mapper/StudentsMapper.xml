<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.icss.dao.StudentsMapper" >
  <resultMap id="BaseResultMap" type="com.icss.bean.Students" >
    <id column="sid" property="sid" jdbcType="VARCHAR" />
    <result column="crid" property="crid" jdbcType="INTEGER" />
    <result column="etcid" property="etcid" jdbcType="INTEGER" />
    <result column="sphonetic" property="sphonetic" jdbcType="VARCHAR" />
    <result column="seducationbackground" property="seducationbackground" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="senglishlevel" property="senglishlevel" jdbcType="VARCHAR" />
    <result column="sworkingexperience" property="sworkingexperience" jdbcType="INTEGER" />
    <result column="schoolprincipal" property="schoolprincipal" jdbcType="VARCHAR" />
    <result column="sptel" property="sptel" jdbcType="VARCHAR" />
    <result column="surgenttel" property="surgenttel" jdbcType="VARCHAR" />
    <result column="semail" property="semail" jdbcType="VARCHAR" />
    <result column="family" property="family" jdbcType="VARCHAR" />
    <result column="solcialbackground" property="solcialbackground" jdbcType="VARCHAR" />
    <result column="styledirection" property="styledirection" jdbcType="INTEGER" />
    <result column="slanguage" property="slanguage" jdbcType="INTEGER" />
    <result column="sprizeexperience" property="sprizeexperience" jdbcType="VARCHAR" />
    <result column="hobby" property="hobby" jdbcType="VARCHAR" />
    <result column="sjobcity" property="sjobcity" jdbcType="INTEGER" />
    <result column="sintroduce" property="sintroduce" jdbcType="INTEGER" />
    <result column="spayment" property="spayment" jdbcType="VARCHAR" />
    <result column="speriod" property="speriod" jdbcType="VARCHAR" />
    <result column="slatecharges" property="slatecharges" jdbcType="REAL" />
    <result column="sentryfee" property="sentryfee" jdbcType="REAL" />
    <result column="sagent" property="sagent" jdbcType="VARCHAR" />
    <result column="sdate" property="sdate" jdbcType="VARCHAR" />
    <result column="sremark" property="sremark" jdbcType="VARCHAR" />
    <result column="sqq" property="sqq" jdbcType="VARCHAR" />
    <result column="sphoto" property="sphoto" jdbcType="VARCHAR" />
    <result column="sif" property="sif" jdbcType="INTEGER" />
  </resultMap>
  <resultMap id="StudentsinfoMap" type="com.icss.bean.Studentsinfo" >
    <result column="crid" property="crid" jdbcType="INTEGER" />
    <result column="eid" property="eid" jdbcType="INTEGER" />
    <result column="crname" property="crname" jdbcType="VARCHAR" />
    <result column="crschool" property="crschool" jdbcType="VARCHAR" />
    <result column="crmajor" property="crmajor" jdbcType="VARCHAR" />
    <result column="crgrade" property="crgrade" jdbcType="VARCHAR" />
    <result column="crage" property="crage" jdbcType="INTEGER" />
    <result column="crtel" property="crtel" jdbcType="VARCHAR" />
    <result column="cronline" property="cronline" jdbcType="INTEGER" />
    <result column="cdbrithday" property="cdbrithday" jdbcType="VARCHAR" />
    <result column="cdmariage" property="cdmariage" jdbcType="VARCHAR" />
    <result column="cdhometown" property="cdhometown" jdbcType="VARCHAR" />
    <result column="cdnation" property="cdnation" jdbcType="VARCHAR" />
    <result column="cdlandscape" property="cdlandscape" jdbcType="VARCHAR" />
    <result column="cdchildren" property="cdchildren" jdbcType="VARCHAR" />
    <result column="cdeducation" property="cdeducation" jdbcType="VARCHAR" />
    <result column="cdcaidid" property="cdcaidid" jdbcType="VARCHAR" />
    <result column="cdgraduationtime" property="cdgraduationtime" jdbcType="VARCHAR" />
    <result column="cdaccountaddress" property="cdaccountaddress" jdbcType="VARCHAR" />
    <result column="cdpresentaddress" property="cdpresentaddress" jdbcType="VARCHAR" />
    <result column="acquaintance" property="acquaintance" jdbcType="VARCHAR" />
    <result column="cdinformationsources" property="cdinformationsources" jdbcType="VARCHAR" />
    <result column="cdwork" property="cdwork" jdbcType="VARCHAR" />
    <result column="cdsalary" property="cdsalary" jdbcType="VARCHAR" />
    <result column="cddate" property="cddate" jdbcType="VARCHAR" />
    <result column="cdtimeline" property="cdtimeline" jdbcType="VARCHAR" />
    <result column="sid" property="sid" jdbcType="VARCHAR" />
    <result column="etcid" property="etcid" jdbcType="INTEGER" />
    <result column="seducationbackground" property="seducationbackground" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="senglishlevel" property="senglishlevel" jdbcType="VARCHAR" />
    <result column="sworkingexperience" property="sworkingexperience" jdbcType="INTEGER" />
    <result column="schoolprincipal" property="schoolprincipal" jdbcType="VARCHAR" />
    <result column="sptel" property="sptel" jdbcType="VARCHAR" />
    <result column="surgenttel" property="surgenttel" jdbcType="VARCHAR" />
    <result column="semail" property="semail" jdbcType="VARCHAR" />
    <result column="family" property="family" jdbcType="VARCHAR" />
    <result column="solcialbackground" property="solcialbackground" jdbcType="VARCHAR" />
    <result column="styledirection" property="styledirection" jdbcType="INTEGER" />
    <result column="slanguage" property="slanguage" jdbcType="INTEGER" />
    <result column="sprizeexperience" property="sprizeexperience" jdbcType="VARCHAR" />
    <result column="hobby" property="hobby" jdbcType="VARCHAR" />
    <result column="sjobcity" property="sjobcity" jdbcType="INTEGER" />
    <result column="sintroduce" property="sintroduce" jdbcType="INTEGER" />
    <result column="spayment" property="spayment" jdbcType="VARCHAR" />
    <result column="speriod" property="speriod" jdbcType="VARCHAR" />
    <result column="slatecharges" property="slatecharges" jdbcType="REAL" />
    <result column="sentryfee" property="sentryfee" jdbcType="REAL" />
    <result column="sagent" property="sagent" jdbcType="VARCHAR" />
    <result column="sdate" property="sdate" jdbcType="VARCHAR" />
    <result column="sremark" property="sremark" jdbcType="VARCHAR" />
    <result column="sqq" property="sqq" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="StudentsManagementBaseResultMap" type="com.icss.bean.StudentsManagement" >
    <result column="crname" property="crname" jdbcType="VARCHAR" />
    <result column="crsex" property="crsex" jdbcType="VARCHAR" />
    <result column="etcname" property="etcname" jdbcType="VARCHAR" />
    <result column="cdbrithday" property="cdbrithday" jdbcType="VARCHAR" />
    <result column="sid" property="sid" jdbcType="INTEGER" />
    <result column="ename" property="ename" jdbcType="VARCHAR" />
    <result column="syname" property="syname" jdbcType="VARCHAR" />
    <result column="crtel" property="crtel" jdbcType="VARCHAR" />
    <result column="sqq" property="sqq" jdbcType="VARCHAR" />
    <result column="semail" property="semail" jdbcType="VARCHAR" />
  </resultMap>
   <resultMap id="SpaceMap" type="com.icss.bean.Space">
  	<result column="spid" property="spid" jdbcType="INTEGER"/>
  	<result column="belongid" property="belongid" jdbcType="INTEGER"/>
  	<result column="spname" property="spname" jdbcType="VARCHAR"/>
  	<result column="price" property="price" jdbcType="REAL"/>
  </resultMap>
  <resultMap id="StayMap" type="com.icss.bean.Stay" >
    <id column="stid" property="stid" jdbcType="INTEGER" />
    <result column="sid" property="sid" jdbcType="VARCHAR" />
    <result column="spid" property="spid" jdbcType="INTEGER" />
    <result column="stpay" property="stpay" jdbcType="REAL" />
    <result column="stcash" property="stcash" jdbcType="REAL" />
    <result column="stdeduction" property="stdeduction" jdbcType="REAL" />
    <result column="stdate" property="stdate" jdbcType="VARCHAR" />
    <result column="stremark" property="stremark" jdbcType="VARCHAR" />
    <result column="eid" property="eid" jdbcType="INTEGER" />
    <result column="eid1" property="eid1" jdbcType="INTEGER" />
    <result column="checkintime" property="checkintime" jdbcType="VARCHAR" />
    <result column="checkouttime" property="checkouttime" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="ScoreMap" type="com.icss.bean.Score">
  	<result column="sid" property="sid" jdbcType="VARCHAR" />
  	<result column="etcid" property="etcid" jdbcType="INTEGER" />
    <result column="stage" property="stage" jdbcType="VARCHAR" />
    <result column="score" property="score" jdbcType="VARCHAR" />
    <result column="appraisedate" property="appraisedate" jdbcType="VARCHAR" />
  </resultMap>
  
  <sql id="Base_Column_List" >
    sid, crid, etcid, sphonetic, seducationbackground, status, senglishlevel, sworkingexperience, 
    schoolprincipal, sptel, surgenttel, semail, family, solcialbackground, styledirection, 
    slanguage, sprizeexperience, hobby, sjobcity, sintroduce, spayment, speriod, slatecharges, 
    sentryfee, sagent, sdate, sremark, sqq ,sphoto,sif
  </sql>
  <sql id="Base_Studentsinfo_List" >
    crid,eid,crname,crschool,crmajor,crgrade,crage,crtel,cronline,cdbrithday,cdmariage,cdhometown,
    cdnation,cdlandscape,cdchildren,cdeducation,cdcaidid,cdgraduationtime,cdaccountaddress, 
    cdpresentaddress, acquaintance,cdinformationsources,cdwork,cdsalary,cddate,cdtimeline,sid,etcid,
    seducationbackground,status,senglishlevel,sworkingexperience,schoolprincipal,sptel,surgenttel,
    semail,family,solcialbackground,styledirection,slanguage,sprizeexperience,hobby,sjobcity,sintroduce,
    spayment,speriod,slatecharges,sentryfee,sagent,sdate,sremark,sqq
  </sql>
  <sql id="Base_Stay_List" >
    stid, sid, spid, stpay, stcash, stdeduction, stdate, stremark, eid, eid1, checkintime, 
    checkouttime
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from students
    where sid = #{sid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from students
    where sid = #{sid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.icss.bean.Students" >
    insert into students (sid, crid, etcid, 
      sphonetic, seducationbackground, status, 
      senglishlevel, sworkingexperience, schoolprincipal, 
      sptel, surgenttel, semail, 
      family, solcialbackground, styledirection, 
      slanguage, sprizeexperience, hobby, 
      sjobcity, sintroduce, spayment, 
      speriod, slatecharges, sentryfee, 
      sagent, sdate, sremark, 
      sqq,sphoto,sif)
    values (#{sid,jdbcType=INTEGER}, #{crid,jdbcType=INTEGER}, #{etcid,jdbcType=INTEGER}, 
      #{sphonetic,jdbcType=VARCHAR}, #{seducationbackground,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, 
      #{senglishlevel,jdbcType=VARCHAR}, #{sworkingexperience,jdbcType=INTEGER}, #{schoolprincipal,jdbcType=VARCHAR}, 
      #{sptel,jdbcType=VARCHAR}, #{surgenttel,jdbcType=VARCHAR}, #{semail,jdbcType=VARCHAR}, 
      #{family,jdbcType=VARCHAR}, #{solcialbackground,jdbcType=VARCHAR}, #{styledirection,jdbcType=INTEGER}, 
      #{slanguage,jdbcType=INTEGER}, #{sprizeexperience,jdbcType=VARCHAR}, #{hobby,jdbcType=VARCHAR}, 
      #{sjobcity,jdbcType=INTEGER}, #{sintroduce,jdbcType=INTEGER}, #{spayment,jdbcType=VARCHAR}, 
      #{speriod,jdbcType=VARCHAR}, #{slatecharges,jdbcType=REAL}, #{sentryfee,jdbcType=REAL}, 
      #{sagent,jdbcType=VARCHAR}, #{sdate,jdbcType=VARCHAR}, #{sremark,jdbcType=VARCHAR}, 
      #{sqq,jdbcType=VARCHAR},#{sphoto,jdbcType=VARCHAR},#{sif,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.icss.bean.Students" >
    insert into students
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="sid != null" >
        sid,
      </if>
      <if test="crid != null" >
        crid,
      </if>
      <if test="etcid != null" >
        etcid,
      </if>
      <if test="sphonetic != null" >
        sphonetic,
      </if>
      <if test="seducationbackground != null" >
        seducationbackground,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="senglishlevel != null" >
        senglishlevel,
      </if>
      <if test="sworkingexperience != null" >
        sworkingexperience,
      </if>
      <if test="schoolprincipal != null" >
        schoolprincipal,
      </if>
      <if test="sptel != null" >
        sptel,
      </if>
      <if test="surgenttel != null" >
        surgenttel,
      </if>
      <if test="semail != null" >
        semail,
      </if>
      <if test="family != null" >
        family,
      </if>
      <if test="solcialbackground != null" >
        solcialbackground,
      </if>
      <if test="styledirection != null" >
        styledirection,
      </if>
      <if test="slanguage != null" >
        slanguage,
      </if>
      <if test="sprizeexperience != null" >
        sprizeexperience,
      </if>
      <if test="hobby != null" >
        hobby,
      </if>
      <if test="sjobcity != null" >
        sjobcity,
      </if>
      <if test="sintroduce != null" >
        sintroduce,
      </if>
      <if test="spayment != null" >
        spayment,
      </if>
      <if test="speriod != null" >
        speriod,
      </if>
      <if test="slatecharges != null" >
        slatecharges,
      </if>
      <if test="sentryfee != null" >
        sentryfee,
      </if>
      <if test="sagent != null" >
        sagent,
      </if>
      <if test="sdate != null" >
        sdate,
      </if>
      <if test="sremark != null" >
        sremark,
      </if>
      <if test="sqq != null" >
        sqq,
      </if>
      <if test="sphoto != null" >
        sphoto,
      </if>
      <if test="sif != null" >
        sif,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="sid != null" >
        #{sid,jdbcType=INTEGER},
      </if>
      <if test="crid != null" >
        #{crid,jdbcType=INTEGER},
      </if>
      <if test="etcid != null" >
        #{etcid,jdbcType=INTEGER},
      </if>
      <if test="sphonetic != null" >
        #{sphonetic,jdbcType=VARCHAR},
      </if>
      <if test="seducationbackground != null" >
        #{seducationbackground,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="senglishlevel != null" >
        #{senglishlevel,jdbcType=VARCHAR},
      </if>
      <if test="sworkingexperience != null" >
        #{sworkingexperience,jdbcType=INTEGER},
      </if>
      <if test="schoolprincipal != null" >
        #{schoolprincipal,jdbcType=VARCHAR},
      </if>
      <if test="sptel != null" >
        #{sptel,jdbcType=VARCHAR},
      </if>
      <if test="surgenttel != null" >
        #{surgenttel,jdbcType=VARCHAR},
      </if>
      <if test="semail != null" >
        #{semail,jdbcType=VARCHAR},
      </if>
      <if test="family != null" >
        #{family,jdbcType=VARCHAR},
      </if>
      <if test="solcialbackground != null" >
        #{solcialbackground,jdbcType=VARCHAR},
      </if>
      <if test="styledirection != null" >
        #{styledirection,jdbcType=INTEGER},
      </if>
      <if test="slanguage != null" >
        #{slanguage,jdbcType=INTEGER},
      </if>
      <if test="sprizeexperience != null" >
        #{sprizeexperience,jdbcType=VARCHAR},
      </if>
      <if test="hobby != null" >
        #{hobby,jdbcType=VARCHAR},
      </if>
      <if test="sjobcity != null" >
        #{sjobcity,jdbcType=INTEGER},
      </if>
      <if test="sintroduce != null" >
        #{sintroduce,jdbcType=INTEGER},
      </if>
      <if test="spayment != null" >
        #{spayment,jdbcType=VARCHAR},
      </if>
      <if test="speriod != null" >
        #{speriod,jdbcType=VARCHAR},
      </if>
      <if test="slatecharges != null" >
        #{slatecharges,jdbcType=REAL},
      </if>
      <if test="sentryfee != null" >
        #{sentryfee,jdbcType=REAL},
      </if>
      <if test="sagent != null" >
        #{sagent,jdbcType=VARCHAR},
      </if>
      <if test="sdate != null" >
        #{sdate,jdbcType=VARCHAR},
      </if>
      <if test="sremark != null" >
        #{sremark,jdbcType=VARCHAR},
      </if>
      <if test="sqq != null" >
        #{sqq,jdbcType=VARCHAR},
      </if>
      <if test="sphoto != null" >
        #{sphoto,jdbcType=VARCHAR},
      </if>
      <if test="sif != null" >
        #{sif,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.icss.bean.Students" >
    update students
    <set >
      <if test="crid != null" >
        crid = #{crid,jdbcType=INTEGER},
      </if>
      <if test="etcid != null" >
        etcid = #{etcid,jdbcType=INTEGER},
      </if>
      <if test="sphonetic != null" >
        sphonetic = #{sphonetic,jdbcType=VARCHAR},
      </if>
      <if test="seducationbackground != null" >
        seducationbackground = #{seducationbackground,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="senglishlevel != null" >
        senglishlevel = #{senglishlevel,jdbcType=VARCHAR},
      </if>
      <if test="sworkingexperience != null" >
        sworkingexperience = #{sworkingexperience,jdbcType=INTEGER},
      </if>
      <if test="schoolprincipal != null" >
        schoolprincipal = #{schoolprincipal,jdbcType=VARCHAR},
      </if>
      <if test="sptel != null" >
        sptel = #{sptel,jdbcType=VARCHAR},
      </if>
      <if test="surgenttel != null" >
        surgenttel = #{surgenttel,jdbcType=VARCHAR},
      </if>
      <if test="semail != null" >
        semail = #{semail,jdbcType=VARCHAR},
      </if>
      <if test="family != null" >
        family = #{family,jdbcType=VARCHAR},
      </if>
      <if test="solcialbackground != null" >
        solcialbackground = #{solcialbackground,jdbcType=VARCHAR},
      </if>
      <if test="styledirection != null" >
        styledirection = #{styledirection,jdbcType=INTEGER},
      </if>
      <if test="slanguage != null" >
        slanguage = #{slanguage,jdbcType=INTEGER},
      </if>
      <if test="sprizeexperience != null" >
        sprizeexperience = #{sprizeexperience,jdbcType=VARCHAR},
      </if>
      <if test="hobby != null" >
        hobby = #{hobby,jdbcType=VARCHAR},
      </if>
      <if test="sjobcity != null" >
        sjobcity = #{sjobcity,jdbcType=INTEGER},
      </if>
      <if test="sintroduce != null" >
        sintroduce = #{sintroduce,jdbcType=INTEGER},
      </if>
      <if test="spayment != null" >
        spayment = #{spayment,jdbcType=VARCHAR},
      </if>
      <if test="speriod != null" >
        speriod = #{speriod,jdbcType=VARCHAR},
      </if>
      <if test="slatecharges != null" >
        slatecharges = #{slatecharges,jdbcType=REAL},
      </if>
      <if test="sentryfee != null" >
        sentryfee = #{sentryfee,jdbcType=REAL},
      </if>
      <if test="sagent != null" >
        sagent = #{sagent,jdbcType=VARCHAR},
      </if>
      <if test="sdate != null" >
        sdate = #{sdate,jdbcType=VARCHAR},
      </if>
      <if test="sremark != null" >
        sremark = #{sremark,jdbcType=VARCHAR},
      </if>
      <if test="sqq != null" >
        sqq = #{sqq,jdbcType=VARCHAR},
      </if>
      <if test="sqq != null" >
        sphoto = #{sphoto,jdbcType=VARCHAR},
      </if>
      <if test="sqq != null" >
        sif = #{sif,jdbcType=INTEGER},
      </if>
    </set>
    where sid = #{sid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.icss.bean.Students" >
    update students
    set crid = #{crid,jdbcType=INTEGER},
      etcid = #{etcid,jdbcType=INTEGER},
      sphonetic = #{sphonetic,jdbcType=VARCHAR},
      seducationbackground = #{seducationbackground,jdbcType=VARCHAR},
      status = #{status,jdbcType=VARCHAR},
      senglishlevel = #{senglishlevel,jdbcType=VARCHAR},
      sworkingexperience = #{sworkingexperience,jdbcType=INTEGER},
      schoolprincipal = #{schoolprincipal,jdbcType=VARCHAR},
      sptel = #{sptel,jdbcType=VARCHAR},
      surgenttel = #{surgenttel,jdbcType=VARCHAR},
      semail = #{semail,jdbcType=VARCHAR},
      family = #{family,jdbcType=VARCHAR},
      solcialbackground = #{solcialbackground,jdbcType=VARCHAR},
      styledirection = #{styledirection,jdbcType=INTEGER},
      slanguage = #{slanguage,jdbcType=INTEGER},
      sprizeexperience = #{sprizeexperience,jdbcType=VARCHAR},
      hobby = #{hobby,jdbcType=VARCHAR},
      sjobcity = #{sjobcity,jdbcType=INTEGER},
      sintroduce = #{sintroduce,jdbcType=INTEGER},
      spayment = #{spayment,jdbcType=VARCHAR},
      speriod = #{speriod,jdbcType=VARCHAR},
      slatecharges = #{slatecharges,jdbcType=REAL},
      sentryfee = #{sentryfee,jdbcType=REAL},
      sagent = #{sagent,jdbcType=VARCHAR},
      sdate = #{sdate,jdbcType=VARCHAR},
      sremark = #{sremark,jdbcType=VARCHAR},
      sqq = #{sqq,jdbcType=VARCHAR},
      sphoto = #{sphoto,jdbcType=VARCHAR},
      sif = #{sif,jdbcType=INTEGER}
    where sid = #{sid,jdbcType=INTEGER}
  </update>
  <!-- 查询所有未入学学生信息  -->
  <select id="allstuinfo" resultMap="StudentsinfoMap">
  	select 
    <include refid="Base_Studentsinfo_List" />
    from view_studentsinfo WHERE sid  NOT IN (
	SELECT sid FROM stay  )
  </select>
  
  <!-- 查看所有学员信息   -->
  <select id="studentsinfo" resultMap="StudentsinfoMap">
  	SELECT crname,crsex crmajor ,cdbrithday,etcname crgrade ,sid,syname hobby ,crtel,sqq,semail,csname status ,ename sremark
  	FROM students s 
	 INNER JOIN customerinfo c ON s.crid = c.crid
	 INNER JOIN detailed d ON d.cdid = c.crid
	 INNER JOIN etcclass es ON es.etcid = s.etcid
	 INNER JOIN empinfo e ON e.eid = es.eid
	 INNER JOIN studydirection sd ON sd.syid = s.styledirection
	 INNER JOIN customerstatus cs on cs.csid = c.cronline where s.sif is NULL
  </select>
  
  <!-- 根据拼音查询学生姓名    -->
  <select id="selectBystupy" parameterType="java.lang.String" resultType="java.lang.String">
    <bind name="date" value="'%' + _parameter + '%'" />
	SELECT crname  FROM customerinfo c INNER JOIN students s ON s.crid = c.crid where s.sphonetic LIKE #{date,jdbcType=VARCHAR}
  </select>
  
  <!-- 根据中文查询学生姓名 -->
  <select id="selectBystucha" parameterType="java.lang.String" resultType="java.lang.String">
  	<bind name="date" value="'%' + _parameter + '%'" />
  	SELECT crname  FROM customerinfo c INNER JOIN students s ON s.crid = c.crid where c.crname LIKE #{date,jdbcType=VARCHAR}
  </select>
  
  <!-- 根据名字拼音查询学生信息 -->
  <select id="selectstuinfoBypy" parameterType="java.lang.String" resultMap="StudentsinfoMap">
  	<bind name="date" value="'%' + _parameter + '%'" />
  	select sid, crname, crtel, csname cdmariage ,cdcaidid,cdwork,cdsalary,sdate, etcname crschool ,startdate cddate,enddate sremark,sqq
  	FROM students s INNER JOIN customerinfo c ON c.crid = s.crid
	INNER JOIN detailed d ON c.crid = d.cdid
	INNER JOIN etcclass e ON e.etcid = s.etcid
	INNER JOIN customerstatus cs on cs.csid = c.cronline WHERE s.sphonetic LIKE #{date,jdbcType=VARCHAR} 
  </select>
  
  <!-- 根据名字中文查询学生信息 -->
  <select id="selectstuinfoBycn" parameterType="java.lang.String" resultMap="StudentsinfoMap">
  	<bind name="date" value="'%' + _parameter + '%'" />
  	select sid, crname, crtel, csname cdmariage ,cdcaidid,cdwork,cdsalary,sdate, etcname crschool ,startdate cddate,enddate sremark,sqq
  	FROM students s INNER JOIN customerinfo c ON c.crid = s.crid
	INNER JOIN detailed d ON c.crid = d.cdid
	INNER JOIN etcclass e ON e.etcid = s.etcid
	INNER JOIN customerstatus cs on cs.csid = c.cronline WHERE c.crname LIKE #{date,jdbcType=VARCHAR}
  </select>
  
  
  <!-- 查询某班级所有学生信息  -->
  <select id="getStuByClass" parameterType="java.lang.Integer" resultMap="StudentsinfoMap">
    select 
    <include refid="Base_Studentsinfo_List" />
    from view_studentsinfo where etcid = #{etcid ,jdbcType=INTEGER}
  </select>
  
  <!-- 查询某班级所有学生考核信息 -->
  <select id="kaohebyclass" resultMap="StudentsinfoMap" parameterType="java.lang.Integer">
  	SELECT crname,crsex crmajor ,cdbrithday,etcname crgrade ,sid,syname hobby ,crtel,sqq,semail,csname status ,ename sremark
  	FROM students s 
	 INNER JOIN customerinfo c ON s.crid = c.crid
	 INNER JOIN detailed d ON d.cdid = c.crid
	 INNER JOIN etcclass es ON es.etcid = s.etcid
	 INNER JOIN empinfo e ON e.eid = es.eid
	 INNER JOIN studydirection sd ON sd.syid = s.styledirection
	 INNER JOIN customerstatus cs on cs.csid = c.cronline where s.sif is NULL and  s.etcid = #{etcid ,jdbcType=INTEGER}
  </select>
  
  <!-- 学生管理多表联合查询——根据学生学号查询一个学员的信息 --> 
  <select id="selectBysid_manage" resultMap="StudentsManagementBaseResultMap"  parameterType="java.lang.Integer">
   <!--  <bind name="date" value="_parameter" /> -->
	SELECT
	customerinfo.crname AS crname,
	customerinfo.crsex AS crsex,
	etcclass.etcname AS etcname,
	detailed.cdbrithday AS cdbrithday,
	students.sid AS sid,
	empinfo.ename AS ename,
	studydirection.syname AS syname,
	customerinfo.crtel AS crtel,
	students.sqq AS sqq,
	students.semail AS semail
	from (((((`customerinfo` join `detailed` on((`detailed`.`cdid` = `customerinfo`.`crid`))) join `students` on((`students`.`crid` = `customerinfo`.`crid`))) join `etcclass` on((`students`.`etcid` = `etcclass`.`etcid`))) join `empinfo` on((`etcclass`.`eid` = `empinfo`.`eid`))) join `studydirection` on((`students`.`styledirection` = `studydirection`.`syid`)))
	 WHERE (`students`.`sid` = #{sid,jdbcType=INTEGER}) 
   </select>
	
	<!-- 查询住宿地址 -->
	<select id="accoadd" parameterType="java.lang.Integer" resultMap="SpaceMap">
		SELECT spid,belongid,spname,price FROM space WHERE belongid=#{belongid,jdbcType=INTEGER}
	</select>
	
	<!-- 新增学员住宿信息  -->
	<insert id="addstay" parameterType="com.icss.bean.Stay">
    insert into stay
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="stid != null" >
        stid,
      </if>
      <if test="sid != null" >
        sid,
      </if>
      <if test="spid != null" >
        spid,
      </if>
      <if test="stpay != null" >
        stpay,
      </if>
      <if test="stcash != null" >
        stcash,
      </if>
      <if test="stdeduction != null" >
        stdeduction,
      </if>
      <if test="stdate != null" >
        stdate,
      </if>
      <if test="stremark != null" >
        stremark,
      </if>
      <if test="eid != null" >
        eid,
      </if>
      <if test="eid1 != null" >
        eid1,
      </if>
      <if test="checkintime != null" >
        checkintime,
      </if>
      <if test="checkouttime != null" >
        checkouttime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="stid != null" >
        #{stid,jdbcType=INTEGER},
      </if>
      <if test="sid != null" >
        #{sid,jdbcType=VARCHAR},
      </if>
      <if test="spid != null" >
        #{spid,jdbcType=INTEGER},
      </if>
      <if test="stpay != null" >
        #{stpay,jdbcType=REAL},
      </if>
      <if test="stcash != null" >
        #{stcash,jdbcType=REAL},
      </if>
      <if test="stdeduction != null" >
        #{stdeduction,jdbcType=REAL},
      </if>
      <if test="stdate != null" >
        #{stdate,jdbcType=VARCHAR},
      </if>
      <if test="stremark != null" >
        #{stremark,jdbcType=VARCHAR},
      </if>
      <if test="eid != null" >
        #{eid,jdbcType=INTEGER},
      </if>
      <if test="eid1 != null" >
        #{eid1,jdbcType=INTEGER},
      </if>
      <if test="checkintime != null" >
        #{checkintime,jdbcType=VARCHAR},
      </if>
      <if test="checkouttime != null" >
        #{checkouttime,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <!-- 查询住宿信息  -->
  
  <!-- 批量(更新)删除学生信息 -->
  <update id="deletestusinfo" parameterType="java.util.List">
   update students set sif=1  where sid in 
  	<foreach collection="list" item="item" index="index" open="(" separator="," close=")" >  
        #{item}  
    </foreach>  
  </update>
	
  <!-- 批量删除学生入住信息 -->
  <delete id="deletestaysinfo" parameterType="java.util.List">
  	 delete from stay where sid in 
  	<foreach collection="list" item="item" index="index" open="(" separator="," close=")" >  
        #{item}  
    </foreach>  
  </delete>
	
	
  <!-- 学生新增考核信息  -->
  <insert id="addcheckinfo" parameterType="com.icss.bean.Score" >
  	 insert into score (sid, stage,etcid, score, appraisedate)
    values (#{sid,jdbcType=VARCHAR}, #{stage,jdbcType=VARCHAR}, #{etcid,jdbcType=INTEGER},
     #{score,jdbcType=VARCHAR}, #{appraisedate,jdbcType=VARCHAR})
  </insert>
  
  <!-- 查询学生考核信息  -->
  <select id="selectstuscore" parameterType="java.lang.Integer" resultMap="StudentsinfoMap">
  	SELECT st.sid,stage status ,score sagent,st.etcid,etcname crgrade, crname,syname hobby,crsex cdmariage FROM score sc 
		INNER JOIN students st ON st.sid = sc.sid
		INNER JOIN etcclass e ON e.etcid= sc.etcid
		INNER JOIN studydirection sd ON sd.syid = st.styledirection
		INNER JOIN customerinfo c ON c.crid= st.crid
		WHERE st.sif is NULL AND sc.etcid=#{etcid,jdbcType=INTEGER} 
		ORDER BY stage DESC ,sc.sid
  </select>
  <!-- 更新学生考核信息  -->
  <update id="updatastuscore" parameterType="com.icss.bean.Score">
  	UPDATE score SET score=#{score,jdbcType=VARCHAR} 
  	WHERE sid=#{sid,jdbcType=VARCHAR} AND stage=#{stage,jdbcType=VARCHAR} AND etcid=#{etcid,jdbcType=INTEGER}
  </update>
  
  <!-- 查询学生每个阶段的考核信息  -->
  <select id="stagescore" resultMap="StudentsinfoMap">
  	SELECT s.sid,group_concat(stage,score) stauts ,etcname, crname FROM score s 
		INNER JOIN students stu ON stu.sid = s.sid
		INNER JOIN customerinfo c ON c.crid = stu.crid
		INNER JOIN etcclass e ON e.etcid = s.etcid
  </select>
</mapper>